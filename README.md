[AboutMe](https://maventalker.github.io/)

2023/3/8

#### 商场停车收费业务简介

主要需求：车辆进入商场停车场停靠，中间到商场消费，结束时车辆离开缴费即可

外延需求：进入商场时，可以签到领取积分，签到后可以免费停车2小时，2小时候按计费规则正常计费。积分可以兑换商场优惠券，车库洗车券。商场上层办公区白领可以办理月卡，出入库直接抬杠节省时间，同时有一定优惠，充值即可，非月卡用户出场时实时计费支付离场。

#### 关键业务梳理

<img src="C:\Users\86159\Desktop\java\ParkingLot\asset\业务梳理图.png" style="zoom: 80%;" />

#### 需求分析：七大业务

1.会员，会员信息（绑定手机号，生日等信息，便于商场营销），车辆信息（主要车牌信息），月卡信息（充值到一定金额后，指定区间免支付出入场，针对商场的工作人员或办公区的白领），签到信息

2. 停车场资源，车位（车辆停靠车位后，系统自动打标，可用车位扣减，停车场入口可用车位实时更新）、道闸（基础数据，真实场景中涉及到岗亭值班人员安排，设备维护等）

3. 积分，会员到达商场后签到领取积分，签到一次可以免费停车2小时，超出部分，以计费规则为准，积分可以兑换商场优惠券、洗车券等

4. 计费，计费规则，车辆进场（记录车辆入场时间，开始计费）、出场扣费（出场识别车牌，依照计费规则，报需支付停车费，分临时车和月卡车两种，临时车现场收费，月卡车只做有效期判定即可）

5. 财务，车辆出入的支付流水，会员月卡充值费用，日常收入统计。

6. 消息，车辆出场支付消息，会员充值消息

7. 兑换洗车券后，直接停车场内洗车

   #### 基于以上业务情况，按领域划分为7大模块，每个模块中划分出相应的实体、事件：

   1.会员，车辆，月卡（绑定手机号，录入车辆，开卡）

   2.车位，闸机，（车辆停靠，车辆离开）

   3.积分（签到，兑换）

   4.计费规则（入场，出场）

   5.交易流水（支付，充值）

   6.消息（推送）

   7.洗车
   
   #### 数据库设计
   
   依照本案例的业务场景，共有7个子模块，每个子模块对应一个存储库，数据存储分别隔离在7个数据库当中
   
   //本例中使用虚拟机docker中的数据库容器mysql  虚拟机IP与数据库端口为: 192.168.183.130 3306
   
   
   
   
   
   
   
   
   
   
